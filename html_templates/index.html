<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Habit Farm</title>

<style>
body {
    margin: 0;
    background: #6b9cff;
    font-family: monospace;
    image-rendering: pixelated;
}

.game {
    max-width: 900px;
    margin: 20px auto;
    background: #88c070;
    border: 6px solid #2c4a1f;
    padding: 12px;
}

.header {
    background: #3b6f3b;
    color: white;
    padding: 10px;
    border: 4px solid #1f3b1f;
    margin-bottom: 12px;
}

/* GRID */
.farm {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
}

/* HABIT TILE */
.tile {
    background: #8b5a2b;
    border: 4px solid #5a3b1a;
    width: 100%;
    aspect-ratio: 1 / 1; /* keeps perfect square */
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

/* ANIMAL WINDOW */
.animal-box {
    background: #6f4420;
    height: 60%;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* TEMP ANIMAL (replace with img later) */
.animal {
    width: 32px;
    height: 32px;
    background: #2ecc71;
}

/* SIZE STATES */
.animal.small { transform: scale(0.8); }
.animal.medium { transform: scale(1.2); }
.animal.large { transform: scale(1.6); }

/* NAME BAR */
.name {
    background: rgba(0,0,0,0.4);
    color: white;
    font-size: 11px;
    padding: 4px;
    text-align: center;
}

/* ACTIONS */
.actions {
    display: flex;
    justify-content: space-between;
    padding: 4px;
}

.actions button {
    font-size: 10px;
    border: 2px solid #000;
    background: #fff;
    cursor: pointer;
}
</style>
</head>

<body>

<div class="game">
    <div class="header">
        <h1>ðŸŒ± HABIT FARM</h1>
    </div>

    <div class="farm">
        {% for habit in habits %}

            {% set size = "small" %}
            {% if habit.happiness_level >= 7 %}
                {% set size = "large" %}
            {% elif habit.happiness_level >= 4 %}
                {% set size = "medium" %}
            {% endif %}

            <div class="tile">
                <div class="animal-box">
                    {% if habit.tamagotchi_id %}
                        <div class="animal {{ size }}"></div>
                    {% endif %}
                </div>

                <div class="name">
                    {{ habit.habit_name }}
                </div>

                <div class="actions">
                    {% if not habit.completed_today %}
                        <form action="/habit/{{ habit.habit_id }}/complete" method="POST">
                            <button>âœ“</button>
                        </form>
                    {% endif %}
                    <a href="/habit/{{ habit.habit_id }}/delete">
                        <button>âœ•</button>
                    </a>
                </div>
            </div>

        {% endfor %}
    </div>
</div>

</body>
</html>
